<!DOCTYPE html>
<html>
<head>
    <title>AMI Health – Login</title>
    <meta charset="UTF-8" />
    <script type="module">
        import { supabase } from "./lib/supabaseClient.js";

        async function loginUser() {
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value;

            const { data, error } = await supabase.auth.signInWithPassword({
                email,
                password
            });

            if (error) {
                alert("❌ Login failed: " + error.message);
                return;
            }

            // Save user session
            localStorage.setItem("ami_session", JSON.stringify(data));

            // Redirect to dashboard
            window.location.href = "dashboard.html";
        }

        window.loginUser = loginUser;
    </script>
</head>

<body>
    <h2>Login to AMI Health</h2>

    <input id="email" type="email" placeholder="Email" /><br><br>
    <input id="password" type="password" placeholder="Password" /><br><br>

    <button onclick="loginUser()">Login</button>
</body>
</html>
